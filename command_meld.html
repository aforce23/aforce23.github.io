<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHBBS Command Meld</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom scrollbar for suggestions */
        .suggestions-list::-webkit-scrollbar {
            width: 8px;
        }

        .suggestions-list::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .suggestions-list::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        .suggestions-list::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Fade in animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>

<body class="bg-slate-900 text-slate-100 min-h-screen pb-12 selection:bg-blue-500 selection:text-white">

    <!-- Header -->
    <header class="bg-slate-950 border-b border-slate-800 p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-blue-600 p-2 rounded-lg shadow-inner shadow-blue-400/20">
                    <i data-lucide="crown" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-wide text-blue-100">Kingdom Hearts: Birth by Sleep</h1>
                    <p class="text-xs text-slate-400 uppercase tracking-widest">Command Meld Calculator</p>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-6">

        <!-- Input Section -->
        <div class="grid md:grid-cols-[1fr_auto_1fr] gap-4 items-end mb-8 relative">

            <!-- Slot 1 -->
            <div class="relative z-20">
                <label class="block text-xs font-bold text-blue-400 uppercase mb-2 ml-1">Command Slot 1</label>
                <div class="relative group">
                    <input type="text" id="slot1" placeholder="e.g. Fire"
                        class="w-full bg-slate-800 border-2 border-slate-700 rounded-xl p-4 pl-12 text-lg focus:outline-none focus:border-blue-500 focus:shadow-[0_0_15px_rgba(59,130,246,0.3)] transition-all placeholder:text-slate-600"
                        autocomplete="off">
                    <i id="icon-slot1" data-lucide="circle-dashed"
                        class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 transition-colors"></i>
                    <button id="clear1"
                        class="hidden absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
                <!-- Suggestions 1 -->
                <div id="suggestions1"
                    class="hidden absolute top-full left-0 w-full bg-slate-800 border border-slate-700 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-2xl z-50 suggestions-list">
                </div>
            </div>

            <!-- Swap Button -->
            <div class="flex justify-center mb-2">
                <button id="swapBtn"
                    class="p-3 bg-slate-800 hover:bg-slate-700 rounded-full border border-slate-700 text-slate-400 hover:text-blue-400 transition-all active:scale-95">
                    <i data-lucide="arrow-right-left" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Slot 2 -->
            <div class="relative z-10">
                <label class="block text-xs font-bold text-blue-400 uppercase mb-2 ml-1">Command Slot 2</label>
                <div class="relative group">
                    <input type="text" id="slot2" placeholder="e.g. Fire Dash"
                        class="w-full bg-slate-800 border-2 border-slate-700 rounded-xl p-4 pl-12 text-lg focus:outline-none focus:border-blue-500 focus:shadow-[0_0_15px_rgba(59,130,246,0.3)] transition-all placeholder:text-slate-600"
                        autocomplete="off">
                    <i id="icon-slot2" data-lucide="circle-dashed"
                        class="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 transition-colors"></i>
                    <button id="clear2"
                        class="hidden absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
                <!-- Suggestions 2 -->
                <div id="suggestions2"
                    class="hidden absolute top-full left-0 w-full bg-slate-800 border border-slate-700 rounded-lg mt-1 max-h-60 overflow-y-auto shadow-2xl z-50 suggestions-list">
                </div>
            </div>

        </div>

        <!-- Results Area -->
        <div id="resultsContainer" class="space-y-6">
            <!-- Dynamic content will be injected here -->
        </div>

    </main>

    <script>
        // --- DATA ---
        const ABILITY_MATRIX = {
            A: { Shimmering: "Fire Boost", Fleeting: "Magic Haste", Pulsing: "Leaf Bracer", Wellspring: "Air Combo Plus", Soothing: "HP Boost", Hungry: "HP Prize Plus", Abounding: "Link Prize Plus" },
            B: { Shimmering: "Fire Boost", Fleeting: "Reload Boost", Pulsing: "Finish Boost", Wellspring: "Once More", Soothing: "Damage Syphon", Hungry: "HP Prize Plus", Abounding: "EXP Chance" },
            C: { Shimmering: "Fire Screen", Fleeting: "Attack Haste", Pulsing: "Finish Boost", Wellspring: "Combo Plus", Soothing: "HP Boost", Hungry: "HP Prize Plus", Abounding: "Link Prize Plus" },
            D: { Shimmering: "Fire Screen", Fleeting: "Attack Haste", Pulsing: "Leaf Bracer", Wellspring: "Combo Plus", Soothing: "HP Boost", Hungry: "HP Prize Plus", Abounding: "Link Prize Plus" },
            E: { Shimmering: "Blizzard Boost", Fleeting: "Magic Haste", Pulsing: "Leaf Bracer", Wellspring: "Combo Plus", Soothing: "Item Boost", Hungry: "HP Prize Plus", Abounding: "Lucky Strike" },
            F: { Shimmering: "Blizzard Boost", Fleeting: "Reload Boost", Pulsing: "Second Chance", Wellspring: "Air Combo Plus", Soothing: "Damage Syphon", Hungry: "HP Prize Plus", Abounding: "Lucky Strike" },
            G: { Shimmering: "Blizzard Screen", Fleeting: "Attack Haste", Pulsing: "Leaf Bracer", Wellspring: "Air Combo Plus", Soothing: "Item Boost", Hungry: "HP Prize Plus", Abounding: "Lucky Strike" },
            H: { Shimmering: "Blizzard Screen", Fleeting: "Magic Haste", Pulsing: "Combo F Boost", Wellspring: "Air Combo Plus", Soothing: "Item Boost", Hungry: "HP Prize Plus", Abounding: "EXP Walker" },
            I: { Shimmering: "Thunder Boost", Fleeting: "Magic Haste", Pulsing: "Combo F Boost", Wellspring: "Air Combo Plus", Soothing: "HP Boost", Hungry: "Treasure Magnet", Abounding: "Link Prize Plus" },
            J: { Shimmering: "Thunder Boost", Fleeting: "Reload Boost", Pulsing: "Combo F Boost", Wellspring: "Once More", Soothing: "Defender", Hungry: "Treasure Magnet", Abounding: "EXP Chance" },
            K: { Shimmering: "Thunder Screen", Fleeting: "Attack Haste", Pulsing: "Finish Boost", Wellspring: "Combo Plus", Soothing: "HP Boost", Hungry: "Treasure Magnet", Abounding: "Link Prize Plus" },
            L: { Shimmering: "Thunder Screen", Fleeting: "Attack Haste", Pulsing: "Finish Boost", Wellspring: "Combo Plus", Soothing: "HP Boost", Hungry: "Treasure Magnet", Abounding: "Lucky Strike" },
            M: { Shimmering: "Cure Boost", Fleeting: "Magic Haste", Pulsing: "Combo F Boost", Wellspring: "Combo Plus", Soothing: "Item Boost", Hungry: "Treasure Magnet", Abounding: "Lucky Strike" },
            N: { Shimmering: "Cure Boost", Fleeting: "Reload Boost", Pulsing: "Second Chance", Wellspring: "Combo Plus", Soothing: "Defender", Hungry: "Treasure Magnet", Abounding: "Lucky Strike" },
            O: { Shimmering: "Dark Screen", Fleeting: "Attack Haste", Pulsing: "Finish Boost", Wellspring: "Air Combo Plus", Soothing: "Item Boost", Hungry: "Treasure Magnet", Abounding: "Lucky Strike" },
            P: { Shimmering: "Dark Screen", Fleeting: "Magic Haste", Pulsing: "Combo F Boost", Wellspring: "Air Combo Plus", Soothing: "Item Boost", Hungry: "Treasure Magnet", Abounding: "EXP Walker" }
        };

        const RECIPES = [
            { result: "Blitz", s1: "Slot Edge", s2: "Quick Blitz", type: "O" },
            { result: "Blitz", s1: "Slot Edge", s2: "Stun Edge", type: "K" },
            { result: "Blitz", s1: "Barrier Surge", s2: "Wishing Edge", type: "P" },
            { result: "Meteor Crash", s1: "Blitz", s2: "Quake", type: "N" },
            { result: "Meteor Crash", s1: "Fire Strike", s2: "Brutal Blast", type: "D" },
            { result: "Magic Hour", s1: "Blitz", s2: "Zero Graviga", type: "O" },
            { result: "Magic Hour", s1: "Barrier Surge", s2: "Aeroga", type: "N" },
            { result: "Fire Dash", s1: "Sliding Dash", s2: "Fire", type: "D" },
            { result: "Fire Dash", s1: "Sliding Dash", s2: "Fira", type: "C" },
            { result: "Fire Dash", s1: "Confusion Strike", s2: "Fire", type: "D" },
            { result: "Dark Haze", s1: "Fire Dash", s2: "Zero Gravira", type: "D" },
            { result: "Dark Haze", s1: "Fire Dash", s2: "Blackout", type: "A" },
            { result: "Dark Haze", s1: "Fire Surge", s2: "Zero Gravity", type: "C" },
            { result: "Sonic Blade", s1: "Blitz", s2: "Air Slide", type: "N" },
            { result: "Sonic Blade", s1: "Fire Dash", s2: "Thunder Surge", type: "K" },
            { result: "Sonic Blade", s1: "Blitz", s2: "Dark Haze", type: "D" },
            { result: "Chaos Blade", s1: "Dark Haze", s2: "Sonic Blade", type: "B" },
            { result: "Zantetsuken", s1: "Stopga", s2: "Dark Haze", type: "B" },
            { result: "Zantetsuken", s1: "Stopga", s2: "Sonic Blade", type: "F" },
            { result: "Strike Raid", s1: "Quick Blitz", s2: "Sliding Dash", type: "O" },
            { result: "Freeze Raid", s1: "Strike Raid", s2: "Blizzara", type: "I" },
            { result: "Freeze Raid", s1: "Blizzard Edge", s2: "Binding Strike", type: "K" },
            { result: "Treasure Raid", s1: "Slot Edge", s2: "Strike Raid", type: "O" },
            { result: "Treasure Raid", s1: "Slot Edge", s2: "Magnet", type: "D" },
            { result: "Treasure Raid", s1: "Slot Edge", s2: "Magnera", type: "K" },
            { result: "Spark Raid", s1: "Magnega", s2: "Freeze Raid", type: "J" },
            { result: "Spark Raid", s1: "Magnega", s2: "Treasure Raid", type: "N" },
            { result: "Spark Raid", s1: "Dodge Roll", s2: "Thunder Surge", type: "P", rare: true },
            { result: "Spark Raid", s1: "Dodge Roll", s2: "Thundaga", type: "L", rare: true },
            { result: "Spark Raid", s1: "Dodge Roll", s2: "Stun Block", type: "L", rare: true },
            { result: "Wind Raid", s1: "Aeroga", s2: "Freeze Raid", type: "B" },
            { result: "Wind Raid", s1: "Aeroga", s2: "Treasure Raid", type: "F" },
            { result: "Fire Surge", s1: "Fire Dash", s2: "Ignite", type: "D" },
            { result: "Fire Surge", s1: "Fira", s2: "Fire Strike", type: "A" },
            { result: "Fire Surge", s1: "Fira", s2: "Confusion Strike", type: "O" },
            { result: "Fire Surge", s1: "Fira", s2: "Binding Strike", type: "K" },
            { result: "Barrier Surge", s1: "Barrier", s2: "Fire Dash", type: "D" },
            { result: "Barrier Surge", s1: "Barrier", s2: "Stun Edge", type: "K" },
            { result: "Thunder Surge", s1: "Thundara", s2: "Fire Dash", type: "D" },
            { result: "Thunder Surge", s1: "Thundara", s2: "Freeze Raid", type: "G" },
            { result: "Thunder Surge", s1: "Thundara", s2: "Stun Edge", type: "I" },
            { result: "Thunder Surge", s1: "Thundara", s2: "Confusion Strike", type: "I" },
            { result: "Aerial Slam", s1: "Fire Dash", s2: "High Jump", type: "A" },
            { result: "Aerial Slam", s1: "Fire Surge", s2: "Aero", type: "D" },
            { result: "Aerial Slam", s1: "Fire Strike", s2: "Aerora", type: "C" },
            { result: "Ars Solum", s1: "Dark Haze", s2: "Sonic Blade", type: "B", rare: true },
            { result: "Ars Solum", s1: "Dark Haze", s2: "Stopga", type: "B", rare: true },
            { result: "Ars Solum", s1: "Sonic Blade", s2: "Stopga", type: "K", rare: true },
            { result: "Ars Solum", s1: "Thunder", s2: "Sliding Dash", type: "K", rare: true },
            { result: "Ars Solum", s1: "Thunder", s2: "Strike Raid", type: "L", rare: true },
            { result: "Ars Solum", s1: "Thundara", s2: "Strike Raid", type: "K", rare: true },
            { result: "Ars Solum", s1: "Thundara", s2: "Confusion Strike", type: "I", rare: true },
            { result: "Ars Arcanum", s1: "Blitz", s2: "Aerial Slam", type: "F" },
            { result: "Ars Arcanum", s1: "Quick Blitz", s2: "Slot Edge", type: "O", rare: true },
            { result: "Ars Arcanum", s1: "Quick Blitz", s2: "Blizzard", type: "G", rare: true },
            { result: "Ars Arcanum", s1: "Quick Blitz", s2: "Blizzara", type: "H", rare: true },
            { result: "Ars Arcanum", s1: "Sliding Dash", s2: "Blizzard", type: "E", rare: true },
            { result: "Ars Arcanum", s1: "Sliding Dash", s2: "Blizzara", type: "G", rare: true },
            { result: "Ars Arcanum", s1: "Cura", s2: "Poison Edge", type: "P", rare: true },
            { result: "Ars Arcanum", s1: "Cura", s2: "Blizzard Edge", type: "G", rare: true },
            { result: "Ars Arcanum", s1: "Fire Strike", s2: "Aerora", type: "C", rare: true },
            { result: "Time Splicer", s1: "Aerial Slam", s2: "Stopga", type: "F" },
            { result: "Time Splicer", s1: "Stun Edge", s2: "Slot Edge", type: "K", rare: true },
            { result: "Time Splicer", s1: "Barrier Surge", s2: "Wishing Edge", type: "P", rare: true },
            { result: "Time Splicer", s1: "Stopga", s2: "Barrier", type: "C", rare: true },
            { result: "Poison Edge", s1: "Poison", s2: "Quick Blitz", type: "O" },
            { result: "Poison Edge", s1: "Poison", s2: "Sliding Dash", type: "K" },
            { result: "Poison Edge", s1: "Poison", s2: "Strike Raid", type: "D" },
            { result: "Wishing Edge", s1: "Barrier Surge", s2: "Strike Raid", type: "O" },
            { result: "Wishing Edge", s1: "Barrier Surge", s2: "Stun Edge", type: "K" },
            { result: "Wishing Edge", s1: "Stun Edge", s2: "Binding Strike", type: "J" },
            { result: "Blizzard Edge", s1: "Quick Blitz", s2: "Blizzard", type: "G" },
            { result: "Blizzard Edge", s1: "Quick Blitz", s2: "Blizzara", type: "H" },
            { result: "Blizzard Edge", s1: "Sliding Dash", s2: "Blizzard", type: "E" },
            { result: "Blizzard Edge", s1: "Sliding Dash", s2: "Blizzara", type: "G" },
            { result: "Stun Edge", s1: "Sliding Dash", s2: "Thunder", type: "K" },
            { result: "Stun Edge", s1: "Strike Raid", s2: "Thunder", type: "L" },
            { result: "Stun Edge", s1: "Strike Raid", s2: "Thundara", type: "K" },
            { result: "Slot Edge", s1: "Cura", s2: "Poison Edge", type: "P" },
            { result: "Slot Edge", s1: "Cura", s2: "Blizzard Edge", type: "G" },
            { result: "Slot Edge", s1: "Curaga", s2: "Renewal Block", type: "N" },
            { result: "Slot Edge", s1: "Curaga", s2: "Focus Block", type: "P" },
            { result: "Slot Edge", s1: "Curaga", s2: "Renewal Barrier", type: "N" },
            { result: "Slot Edge", s1: "Curaga", s2: "Focus Barrier", type: "P" },
            { result: "Slot Edge", s1: "Wishing Edge", s2: "Cure", type: "O" },
            { result: "Fire Strike", s1: "Poison Edge", s2: "Fira", type: "D" },
            { result: "Fire Strike", s1: "Stun Edge", s2: "Fire", type: "K" },
            { result: "Fire Strike", s1: "Wishing Edge", s2: "Ignite", type: "A" },
            { result: "Confusion Strike", s1: "Confuse", s2: "Quick Blitz", type: "O" },
            { result: "Confusion Strike", s1: "Confuse", s2: "Strike Raid", type: "G" },
            { result: "Confusion Strike", s1: "Sliding Dash", s2: "Zero Gravity", type: "K" },
            { result: "Binding Strike", s1: "Bind", s2: "Quick Blitz", type: "K" },
            { result: "Binding Strike", s1: "Bind", s2: "Strike Raid", type: "O" },
            { result: "Binding Strike", s1: "Stun Edge", s2: "Zero Gravity", type: "I" },
            { result: "Brutal Blast", s1: "Stun Edge", s2: "Mine Shield", type: "O" },
            { result: "Brutal Blast", s1: "Binding Strike", s2: "Mine Square", type: "L" },
            { result: "Tornado Strike", s1: "Aeroga", s2: "Confusion Strike", type: "G" },
            { result: "Tornado Strike", s1: "Aeroga", s2: "Binding Strike", type: "F" },
            { result: "Magnet Spiral", s1: "Binding Strike", s2: "Collision Magnet", type: "K" },
            { result: "Magnet Spiral", s1: "Binding Strike", s2: "Magnega", type: "J" },
            { result: "Magnet Spiral", s1: "Magnera", s2: "Quick Blitz", type: "K", rare: true },
            { result: "Magnet Spiral", s1: "Magnera", s2: "Stun Edge", type: "L", rare: true },
            { result: "Magnet Spiral", s1: "Zero Gravira", s2: "Magnet", type: "I", rare: true },
            { result: "Windcutter", s1: "Aeroga", s2: "Binding Strike", type: "F" },
            { result: "Windcutter", s1: "Aeroga", s2: "Confusion Strike", type: "G" },
            { result: "Limit Storm", s1: "Brutal Blast", s2: "Confusion Strike", type: "G" },
            { result: "Limit Storm", s1: "Brutal Blast", s2: "Binding Strike", type: "D" },
            { result: "Salvation", s1: "Wind Raid", s2: "Curaga", type: "N" },
            { result: "Collision Magnet", s1: "Magnera", s2: "Quick Blitz", type: "K" },
            { result: "Collision Magnet", s1: "Magnera", s2: "Stun Edge", type: "L" },
            { result: "Collision Magnet", s1: "Zero Gravira", s2: "Magnet", type: "I" },
            { result: "Geo Impact", s1: "Brutal Blast", s2: "Brutal Blast", type: "N" },
            { result: "Sacrifice", s1: "Warp", s2: "Dark Haze", type: "B" },
            { result: "Sacrifice", s1: "Warp", s2: "Poison Edge", type: "D" },
            { result: "Break Time", s1: "Curaga", s2: "Renewal Block", type: "N", rare: true },
            { result: "Break Time", s1: "Curaga", s2: "Focus Block", type: "P", rare: true },
            { result: "Break Time", s1: "Curaga", s2: "Renewal Barrier", type: "N", rare: true },
            { result: "Break Time", s1: "Curaga", s2: "Focus Barrier", type: "P", rare: true },
            { result: "Fira", s1: "Fire", s2: "Fire Dash", type: "D" },
            { result: "Fira", s1: "Fire", s2: "Fire Strike", type: "D" },
            { result: "Fira", s1: "Fire", s2: "Fire", type: "A" },
            { result: "Fira", s1: "Fire", s2: "Ignite", type: "C" },
            { result: "Firaga", s1: "Fira", s2: "Fire Dash", type: "D" },
            { result: "Firaga", s1: "Fira", s2: "Fire", type: "A" },
            { result: "Firaga", s1: "Fira", s2: "Fira", type: "B" },
            { result: "Dark Firaga", s1: "Firaga", s2: "Dark Haze", type: "D" },
            { result: "Dark Firaga", s1: "Firaga", s2: "Blackout", type: "B" },
            { result: "Fission Firaga", s1: "Fira", s2: "Aeroga", type: "A" },
            { result: "Fission Firaga", s1: "Firaga", s2: "Aerora", type: "A" },
            { result: "Fission Firaga", s1: "Firaga", s2: "Aeroga", type: "B" },
            { result: "Triple Firaga", s1: "Firaga", s2: "Blitz", type: "D" },
            { result: "Triple Firaga", s1: "Firaga", s2: "Fira", type: "A" },
            { result: "Triple Firaga", s1: "Firaga", s2: "Firaga", type: "B" },
            { result: "Crawling Fire", s1: "Firaga", s2: "Slow", type: "A" },
            { result: "Crawling Fire", s1: "Firaga", s2: "Stopra", type: "D" },
            { result: "Crawling Fire", s1: "Firaga", s2: "Stopga", type: "B" },
            { result: "Blizzara", s1: "Blizzard", s2: "Strike Raid", type: "G" },
            { result: "Blizzara", s1: "Blizzard", s2: "Blizzard Edge", type: "G" },
            { result: "Blizzara", s1: "Blizzard", s2: "Blizzard", type: "E" },
            { result: "Blizzara", s1: "Blizzard", s2: "Aero", type: "H" },
            { result: "Blizzaga", s1: "Blizzara", s2: "Blizzard Edge", type: "G" },
            { result: "Blizzaga", s1: "Blizzara", s2: "Blizzard", type: "E" },
            { result: "Blizzaga", s1: "Blizzara", s2: "Blizzara", type: "F" },
            { result: "Triple Blizzaga", s1: "Blizzaga", s2: "Blitz", type: "G" },
            { result: "Triple Blizzaga", s1: "Blizzaga", s2: "Blizzara", type: "E" },
            { result: "Triple Blizzaga", s1: "Blizzaga", s2: "Blizzaga", type: "F" },
            { result: "Thundara", s1: "Thunder", s2: "Stun Edge", type: "K" },
            { result: "Thundara", s1: "Thunder", s2: "Thunder", type: "I" },
            { result: "Thundara", s1: "Zero Gravity", s2: "Magnet", type: "L" },
            { result: "Thundaga", s1: "Thundara", s2: "Binding Strike", type: "K" },
            { result: "Thundaga", s1: "Thundara", s2: "Thunder", type: "I" },
            { result: "Thundaga", s1: "Thundara", s2: "Thundara", type: "J" },
            { result: "Thundaga Shot", s1: "Thundaga", s2: "Strike Raid", type: "I" },
            { result: "Thundaga Shot", s1: "Thundaga", s2: "Freeze Raid", type: "E" },
            { result: "Thundaga Shot", s1: "Thundaga", s2: "Firaga", type: "A" },
            { result: "Cura", s1: "Cure", s2: "Thunder", type: "I" },
            { result: "Cura", s1: "Cure", s2: "Cure", type: "M" },
            { result: "Cura", s1: "Cure", s2: "Aero", type: "O" },
            { result: "Curaga", s1: "Cura", s2: "Cure", type: "M" },
            { result: "Curaga", s1: "Cura", s2: "Cura", type: "N" },
            { result: "Mine Shield", s1: "Fira", s2: "Zero Gravity", type: "A" },
            { result: "Mine Shield", s1: "Ignite", s2: "Stop", type: "D" },
            { result: "Mine Shield", s1: "Block", s2: "Fira", type: "C" },
            { result: "Mine Shield", s1: "Block", s2: "Stopra", type: "M" },
            { result: "Mine Square", s1: "Fira", s2: "Stop", type: "A" },
            { result: "Mine Square", s1: "Aerora", s2: "Ignite", type: "D" },
            { result: "Mine Square", s1: "Barrier", s2: "Fira", type: "C" },
            { result: "Mine Square", s1: "Barrier", s2: "Stopra", type: "M" },
            { result: "Seeker Mine", s1: "Mine Shield", s2: "Mine Square", type: "B" },
            { result: "Seeker Mine", s1: "Mine Shield", s2: "Magnega", type: "C" },
            { result: "Seeker Mine", s1: "Mine Square", s2: "Magnega", type: "D" },
            { result: "Zero Gravira", s1: "Zero Gravity", s2: "Thunder", type: "I" },
            { result: "Zero Gravira", s1: "Zero Gravity", s2: "Zero Gravity", type: "M" },
            { result: "Zero Gravira", s1: "Magnet", s2: "Aero", type: "P" },
            { result: "Zero Graviga", s1: "Zero Gravira", s2: "Thundara", type: "I" },
            { result: "Zero Graviga", s1: "Zero Gravira", s2: "Zero Gravity", type: "M" },
            { result: "Zero Graviga", s1: "Zero Gravira", s2: "Zero Gravira", type: "N" },
            { result: "Magnera", s1: "Magnet", s2: "Stun Edge", type: "K" },
            { result: "Magnera", s1: "Magnet", s2: "Thunder", type: "I" },
            { result: "Magnera", s1: "Magnet", s2: "Magnet", type: "M" },
            { result: "Magnega", s1: "Magnera", s2: "Magnet", type: "I" },
            { result: "Magnega", s1: "Magnera", s2: "Magnera", type: "J" },
            { result: "Munny Magnet", s1: "Magnera", s2: "Wishing Edge", type: "K" },
            { result: "Munny Magnet", s1: "Magnera", s2: "Thundara", type: "I" },
            { result: "Energy Magnet", s1: "Magnera", s2: "Cure", type: "M" },
            { result: "Energy Magnet", s1: "Magnera", s2: "Cura", type: "N" },
            { result: "D-Link Magnet", s1: "Magnera", s2: "Zero Gravira", type: "L" },
            { result: "D-Link Magnet", s1: "Magnera", s2: "Stopra", type: "I" },
            { result: "Aerora", s1: "Aero", s2: "Quick Blitz", type: "G" },
            { result: "Aerora", s1: "Aero", s2: "Thunder", type: "I" },
            { result: "Aerora", s1: "Aero", s2: "Aero", type: "E" },
            { result: "Aeroga", s1: "Aerora", s2: "Quick Blitz", type: "O" },
            { result: "Aeroga", s1: "Aerora", s2: "Aero", type: "M" },
            { result: "Aeroga", s1: "Aerora", s2: "Aerora", type: "N" },
            { result: "Warp", s1: "Zero Gravira", s2: "Thundara", type: "I", rare: true },
            { result: "Warp", s1: "Zero Gravira", s2: "Zero Gravity", type: "M", rare: true },
            { result: "Warp", s1: "Zero Gravira", s2: "Zero Gravira", type: "N", rare: true },
            { result: "Warp", s1: "Zero Gravity", s2: "Thunder", type: "I", rare: true },
            { result: "Warp", s1: "Zero Gravity", s2: "Zero Gravity", type: "M", rare: true },
            { result: "Warp", s1: "Magnet", s2: "Aero", type: "P", rare: true },
            { result: "Faith", s1: "Wind Raid", s2: "Break Time", type: "N" },
            { result: "Deep Freeze", s1: "Blizzaga", s2: "Freeze Raid", type: "G" },
            { result: "Deep Freeze", s1: "Blizzaga", s2: "Binding Strike", type: "H" },
            { result: "Deep Freeze", s1: "Blizzaga", s2: "Triple Blizzaga", type: "F" },
            { result: "Glacier", s1: "Deep Freeze", s2: "Blizzaga", type: "E" },
            { result: "Glacier", s1: "Deep Freeze", s2: "Triple Blizzaga", type: "F" },
            { result: "Ice Barrage", s1: "Blizzaga", s2: "Mine Shield", type: "F" },
            { result: "Ice Barrage", s1: "Blizzaga", s2: "Mine Square", type: "H" },
            { result: "Firaga Burst", s1: "Fira", s2: "Aeroga", type: "A", rare: true },
            { result: "Firaga Burst", s1: "Firaga", s2: "Aerora", type: "A", rare: true },
            { result: "Firaga Burst", s1: "Firaga", s2: "Aeroga", type: "B", rare: true },
            { result: "Firaga Burst", s1: "Firaga", s2: "Slow", type: "A", rare: true },
            { result: "Firaga Burst", s1: "Firaga", s2: "Stopra", type: "D", rare: true },
            { result: "Firaga Burst", s1: "Firaga", s2: "Stopga", type: "B", rare: true },
            { result: "Raging Storm", s1: "Fission Firaga", s2: "Firaga Burst", type: "B" },
            { result: "Raging Storm", s1: "Fira", s2: "Fire Dash", type: "D", rare: true },
            { result: "Raging Storm", s1: "Fira", s2: "Fire", type: "A", rare: true },
            { result: "Raging Storm", s1: "Fira", s2: "Fira", type: "B", rare: true },
            { result: "Raging Storm", s1: "Fira", s2: "Firaga", type: "A", rare: true },
            { result: "Raging Storm", s1: "Firaga", s2: "Blitz", type: "D", rare: true },
            { result: "Raging Storm", s1: "Firaga", s2: "Firaga", type: "B", rare: true },
            { result: "Raging Storm", s1: "Fire Surge", s2: "Cartwheel", type: "C", rare: true },
            { result: "Mega Flare", s1: "Fission Firaga", s2: "Crawling Fire", type: "B" },
            { result: "Quake", s1: "Brutal Blast", s2: "Zero Graviga", type: "B" },
            { result: "Quake", s1: "Brutal Blast", s2: "Magnega", type: "C" },
            { result: "Quake", s1: "Brutal Blast", s2: "Brutal Blast", type: "N", rare: true },
            { result: "Quake", s1: "Stun Edge", s2: "Mine Shield", type: "O", rare: true },
            { result: "Quake", s1: "Binding Strike", s2: "Mine Square", type: "L", rare: true },
            { result: "Meteor", s1: "Geo Impact", s2: "Quake", type: "B" },
            { result: "Meteor", s1: "Brutal Blast", s2: "Zero Graviga", type: "B", rare: true },
            { result: "Meteor", s1: "Brutal Blast", s2: "Magnega", type: "C", rare: true },
            { result: "Tornado", s1: "Magnega", s2: "Aeroga", type: "N" },
            { result: "Tornado", s1: "Aerora", s2: "Quick Blitz", type: "O", rare: true },
            { result: "Tornado", s1: "Aerora", s2: "Aero", type: "M", rare: true },
            { result: "Tornado", s1: "Aerora", s2: "Aerora", type: "N", rare: true },
            { result: "Tornado", s1: "Aero", s2: "Quick Blitz", type: "G", rare: true },
            { result: "Tornado", s1: "Aero", s2: "Thunder", type: "I", rare: true },
            { result: "Tornado", s1: "Aero", s2: "Aero", type: "E", rare: true },
            { result: "Transcendence", s1: "Magnet Spiral", s2: "Zero Graviga", type: "J" },
            { result: "Mini", s1: "Magnega", s2: "Magnega", type: "J" },
            { result: "Mini", s1: "Magnega", s2: "Bind", type: "I" },
            { result: "Mini", s1: "Magnera", s2: "Warp", type: "N" },
            { result: "Blackout", s1: "Zero Gravity", s2: "Confuse", type: "M" },
            { result: "Blackout", s1: "Zero Gravira", s2: "Confuse", type: "N" },
            { result: "Blackout", s1: "Zero Gravira", s2: "Poison", type: "P" },
            { result: "Ignite", s1: "Bind", s2: "Fire", type: "A" },
            { result: "Ignite", s1: "Bind", s2: "Fira", type: "C" },
            { result: "Stopra", s1: "Slow", s2: "Slow", type: "L" },
            { result: "Stopra", s1: "Slow", s2: "Stop", type: "K" },
            { result: "Stopra", s1: "Stop", s2: "Stop", type: "I" },
            { result: "Stopga", s1: "Stopra", s2: "Stop", type: "I" },
            { result: "Stopga", s1: "Stopra", s2: "Stopra", type: "J" },
            { result: "Thunder Roll", s1: "Dodge Roll", s2: "Thunder Surge", type: "P" },
            { result: "Thunder Roll", s1: "Dodge Roll", s2: "Thundaga", type: "L" },
            { result: "Thunder Roll", s1: "Dodge Roll", s2: "Stun Block", type: "L" },
            { result: "Firewheel", s1: "Cartwheel", s2: "Fire Surge", type: "B" },
            { result: "Firewheel", s1: "Cartwheel", s2: "Firaga", type: "B" },
            { result: "Firewheel", s1: "Cartwheel", s2: "Fission Firaga", type: "C" },
            { result: "Ice Slide", s1: "Air Slide", s2: "Blizzard Edge", type: "F" },
            { result: "Ice Slide", s1: "Air Slide", s2: "Blizzaga", type: "H" },
            { result: "Fire Glide", s1: "Glide", s2: "Fire Surge", type: "C" },
            { result: "Fire Glide", s1: "Glide", s2: "Firaga", type: "B" },
            { result: "Homing Slide", s1: "Sliding Dash", s2: "Magnera", type: "P" },
            { result: "Homing Slide", s1: "Sliding Dash", s2: "Air Slide", type: "C" },
            { result: "Homing Slide", s1: "Magnet", s2: "Air Slide", type: "L" },
            { result: "Renewal Block", s1: "Block", s2: "Curaga", type: "P" },
            { result: "Renewal Block", s1: "Block", s2: "Esuna", type: "C" },
            { result: "Stun Block", s1: "Block", s2: "Stun Edge", type: "L" },
            { result: "Stun Block", s1: "Block", s2: "Thundaga", type: "I" },
            { result: "Poison Block", s1: "Block", s2: "Poison Edge", type: "H" },
            { result: "Poison Block", s1: "Block", s2: "Poison", type: "P" },
            { result: "Renewal Barrier", s1: "Barrier", s2: "Curaga", type: "P" },
            { result: "Renewal Barrier", s1: "Barrier", s2: "Esuna", type: "N" },
            { result: "Confuse Barrier", s1: "Barrier", s2: "Confusion Strike", type: "C" },
            { result: "Confuse Barrier", s1: "Barrier", s2: "Confuse", type: "L" },
            { result: "Stop Barrier", s1: "Barrier", s2: "Stopga", type: "C" },
            { result: "Payback Fang", s1: "Sliding Dash", s2: "Counter Hammer", type: "P" },
            { result: "Payback Raid", s1: "Sliding Dash", s2: "Strike Raid", type: "P" },
            { result: "Payback Surge", s1: "Sliding Dash", s2: "Fire Surge", type: "C" },
            { result: "Payback Surge", s1: "Sliding Dash", s2: "Thunder Surge", type: "L" },
            { result: "Lightning Ray", s1: "Blitz", s2: "Air Slide", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Fire Dash", s2: "Thunder Surge", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Thundara", s2: "Binding Strike", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Thundara", s2: "Thunder", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Thundara", s2: "Thundara", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Blitz", s2: "Dark Haze", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Blitz", s2: "Aerial Slam", type: "-", rare: true },
            { result: "Lightning Ray", s1: "Barrier Surge", s2: "Aeroga", type: "-", rare: true },
            { result: "Meteor Shower", s1: "Blitz", s2: "Zero Graviga", type: "-", rare: true },
            { result: "Meteor Shower", s1: "Thundaga", s2: "Strike Raid", type: "-", rare: true },
            { result: "Meteor Shower", s1: "Thundaga", s2: "Freeze Raid", type: "-", rare: true },
            { result: "Meteor Shower", s1: "Thundaga", s2: "Firaga", type: "-", rare: true },
            { result: "Bio Barrage", s1: "Poison", s2: "Quick Blitz", type: "-", rare: true },
            { result: "Bio Barrage", s1: "Poison", s2: "Sliding Dash", type: "-", rare: true },
            { result: "Bio Barrage", s1: "Poison", s2: "Strike Raid", type: "-", rare: true },
            { result: "Bio Barrage", s1: "Poison", s2: "Block", type: "-", rare: true },
            { result: "Bio Barrage", s1: "Poison Edge", s2: "Block", type: "-", rare: true }
        ];

        const UNIQUE_COMMANDS = Array.from(new Set(RECIPES.flatMap(r => [r.s1, r.s2]))).sort();

        // --- CATEGORY LISTS ---
        const ATTACK_CMDS = new Set([
            "Blitz", "Meteor Crash", "Fire Strike", "Magic Hour", "Barrier Surge", "Fire Dash", "Dark Haze", "Confusion Strike",
            "Fire Surge", "Sonic Blade", "Chaos Blade", "Zantetsuken", "Strike Raid", "Freeze Raid", "Treasure Raid",
            "Spark Raid", "Wind Raid", "Ars Solum", "Ars Arcanum", "Time Splicer", "Magnet Spiral", "Tornado Strike",
            "Geo Impact", "Sacrifice", "Break Time", "Slot Edge", "Stun Edge", "Quick Blitz", "Sliding Dash",
            "Poison Edge", "Wishing Edge", "Blizzard Edge", "Binding Strike", "Brutal Blast", "Aerial Slam"
        ]);

        const MAGIC_CMDS = new Set([
            "Fira", "Firaga", "Dark Firaga", "Fission Firaga", "Triple Firaga", "Crawling Fire",
            "Blizzara", "Blizzaga", "Triple Blizzaga", "Thundara", "Thundaga", "Thundaga Shot",
            "Cura", "Curaga", "Mine Shield", "Mine Square", "Seeker Mine", "Zero Gravira", "Zero Graviga",
            "Magnera", "Magnega", "Munny Magnet", "Energy Magnet", "D-Link Magnet",
            "Aerora", "Aeroga", "Warp", "Faith", "Deep Freeze", "Glacier", "Ice Barrage",
            "Firaga Burst", "Raging Storm", "Mega Flare", "Quake", "Meteor", "Tornado", "Transcendence", "Mini",
            "Blackout", "Zero Gravity", "Magnet", "Aero", "Blizzard", "Fire", "Thunder", "Stop", "Slow", "Confuse", "Poison", "Sleep", "Ignite"
        ]);

        const ACTION_CMDS = new Set([
            "Thunder Roll", "Firewheel", "Ice Slide", "Fire Glide", "Homing Slide",
            "Renewal Block", "Stun Block", "Poison Block", "Payback Fang", "Renewal Barrier", "Confuse Barrier", "Stop Barrier", "Payback Raid", "Payback Surge",
            "Dodge Roll", "Cartwheel", "Air Slide", "Glide", "Block", "Counter Hammer"
        ]);

        const SHOTLOCK_CMDS = new Set([
            "Bio Barrage", "Lightning Ray", "Meteor Shower"
        ]);

        // --- ELEMENTS ---
        const slot1Input = document.getElementById('slot1');
        const slot2Input = document.getElementById('slot2');
        const clear1Btn = document.getElementById('clear1');
        const clear2Btn = document.getElementById('clear2');
        const suggestions1 = document.getElementById('suggestions1');
        const suggestions2 = document.getElementById('suggestions2');
        const swapBtn = document.getElementById('swapBtn');
        const resultsContainer = document.getElementById('resultsContainer');

        // --- LOGIC ---

        function getCommandInfo(name) {
            const cmd = UNIQUE_COMMANDS.find(c => c.toLowerCase() === name.toLowerCase()) || name;
            if (ATTACK_CMDS.has(cmd)) return { icon: 'swords', color: 'text-orange-400' };
            if (MAGIC_CMDS.has(cmd)) return { icon: 'wand-sparkles', color: 'text-purple-400' };
            if (ACTION_CMDS.has(cmd)) return { icon: 'shield', color: 'text-yellow-400' };
            if (SHOTLOCK_CMDS.has(cmd)) return { icon: 'crosshair', color: 'text-green-400' };
            return { icon: 'circle-dashed', color: 'text-slate-500' };
        }
        function updateIcon(id, info) {
            const oldIcon = document.getElementById(id);
            if (!oldIcon) return;
            const newIcon = document.createElement('i');
            newIcon.id = id;
            newIcon.className = `w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 transition-colors ${info.color}`;
            newIcon.setAttribute('data-lucide', info.icon);
            oldIcon.parentNode.replaceChild(newIcon, oldIcon);
            lucide.createIcons();
        }

        function calculate() {
            const s1 = slot1Input.value.trim().toLowerCase();
            const s2 = slot2Input.value.trim().toLowerCase();

            updateIcon('icon-slot1', getCommandInfo(s1));
            updateIcon('icon-slot2', getCommandInfo(s2));

            // Toggle clear buttons
            clear1Btn.classList.toggle('hidden', slot1Input.value === '');
            clear2Btn.classList.toggle('hidden', slot2Input.value === '');

            if (!s1 || !s2) {
                resultsContainer.innerHTML = '';
                return;
            }

            const found = RECIPES.filter(r =>
                (r.s1.toLowerCase() === s1 && r.s2.toLowerCase() === s2) ||
                (r.s1.toLowerCase() === s2 && r.s2.toLowerCase() === s1)
            );

            renderResults(found);
        }

        function renderResults(results) {
            resultsContainer.innerHTML = '';

            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="text-center p-8 bg-slate-800/50 rounded-2xl border border-dashed border-slate-700 animate-fade-in">
                        <i data-lucide="search" class="w-8 h-8 mx-auto text-slate-600 mb-2"></i>
                        <p class="text-slate-400">No known recipe found for this combination.</p>
                        <p class="text-sm text-slate-500 mt-1">Try reversing the inputs or checking command spelling.</p>
                    </div>
                `;
            } else {
                results.forEach(res => {
                    const card = document.createElement('div');
                    card.className = "bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl overflow-hidden shadow-xl animate-fade-in";

                    const rareBadge = res.rare ? `<span class="px-2 py-0.5 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30">Rare Recipe</span>` : '';

                    // Determine Style based on Category
                    let iconName = "zap"; // Default
                    let iconColor = "text-blue-400";
                    let bgColor = "bg-blue-500/10";
                    let borderColor = "border-blue-500/30";

                    if (ATTACK_CMDS.has(res.result)) {
                        iconName = "swords"; // Used "swords" as safe fallback for key-square
                        iconColor = "text-orange-400";
                        bgColor = "bg-orange-500/10";
                        borderColor = "border-orange-500/30";
                    } else if (MAGIC_CMDS.has(res.result)) {
                        iconName = "wand-sparkles";
                        iconColor = "text-purple-400";
                        bgColor = "bg-purple-500/10";
                        borderColor = "border-purple-500/30";
                    } else if (ACTION_CMDS.has(res.result)) {
                        iconName = "shield";
                        iconColor = "text-yellow-400";
                        bgColor = "bg-yellow-500/10";
                        borderColor = "border-yellow-500/30";
                    } else if (SHOTLOCK_CMDS.has(res.result)) {
                        iconName = "crosshair";
                        iconColor = "text-green-400";
                        bgColor = "bg-green-500/10";
                        borderColor = "border-green-500/30";
                    }

                    let abilitiesHtml = '';
                    if (ABILITY_MATRIX[res.type]) {
                        Object.entries(ABILITY_MATRIX[res.type]).forEach(([crystal, ability]) => {
                            let colorClass = "text-slate-200";
                            if (ability.includes("Fire")) colorClass = "text-red-300";
                            else if (ability.includes("Combo")) colorClass = "text-gray-300";
                            else if (ability.includes("Lucky")) colorClass = "text-amber-300";
                            else if (ability.includes("Thunder") || ability.includes("Treasure")) colorClass = "text-yellow-300";
                            else if (ability.includes("Blizzard") || ability.includes("Defender")) colorClass = "text-blue-300";
                            else if (ability.includes("Magic")) colorClass = "text-purple-300";
                            else if (ability.includes("Link")) colorClass = "text-cyan-300";
                            else if (ability.includes("Reload")) colorClass = "text-rose-500";
                            else if (ability.includes("HP") || ability.includes("HP") || ability.includes("Syphon") || ability.includes("Bracer") || ability.includes("Second") || ability.includes("Once")) colorClass = "text-emerald-300";


                            abilitiesHtml += `
                                <div class="flex items-center justify-between p-3 rounded-lg bg-slate-800 border border-slate-700/50 hover:border-slate-600 transition-colors">
                                    <span class="text-slate-400 text-sm">${crystal}</span>
                                    <span class="font-semibold text-sm ${colorClass}">${ability}</span>
                                </div>
                            `;
                        });
                    } else {
                        abilitiesHtml = `<p class="text-slate-500 italic">No ability data available for Type ${res.type}</p>`;
                    }

                    card.innerHTML = `
                        <div class="p-6 md:p-8 flex flex-col md:flex-row items-center md:items-start justify-between gap-6 border-b border-slate-700/50">
                            <div class="flex items-center gap-4">
                                <div class="w-16 h-16 ${bgColor} rounded-2xl flex items-center justify-center border ${borderColor} shadow-lg">
                                    <i data-lucide="${iconName}" class="w-8 h-8 ${iconColor}"></i>
                                </div>
                                <div>
                                    <h2 class="text-3xl font-bold text-white mb-1">${res.result}</h2>
                                    <div class="flex gap-2 text-sm">
                                        <span class="px-2 py-0.5 rounded bg-slate-700 text-slate-300 border border-slate-600">Type ${res.type}</span>
                                        ${rareBadge}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-6 bg-slate-900/50">
                            <h3 class="text-sm font-bold uppercase text-slate-500 mb-4 flex items-center gap-2">
                                <i data-lucide="sparkles" class="w-4 h-4"></i>
                                Resulting Abilities by Crystal
                            </h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                                ${abilitiesHtml}
                            </div>
                        </div>
                    `;
                    resultsContainer.appendChild(card);
                });
            }
            lucide.createIcons();
        }

        // --- AUTOCOMPLETE LOGIC ---

        function setupAutocomplete(input, list) {
            input.addEventListener('input', () => {
                const val = input.value.toLowerCase();
                list.innerHTML = '';
                if (!val) {
                    list.classList.add('hidden');
                    calculate();
                    return;
                }

                const matches = UNIQUE_COMMANDS.filter(c => c.toLowerCase().includes(val));

                if (matches.length > 0) {
                    list.classList.remove('hidden');
                    matches.forEach(match => {
                        const btn = document.createElement('button');
                        btn.className = "w-full text-left px-4 py-2 hover:bg-blue-600/20 hover:text-blue-200 transition-colors border-b border-slate-700/50 last:border-0 text-slate-300";
                        btn.textContent = match;
                        btn.addEventListener('click', () => {
                            input.value = match;
                            list.classList.add('hidden');
                            calculate();
                        });
                        list.appendChild(btn);
                    });
                } else {
                    list.classList.add('hidden');
                }
                calculate();
            });

            input.addEventListener('focus', () => {
                const val = input.value.toLowerCase();
                if (val && list.children.length > 0) list.classList.remove('hidden');
            });
        }

        setupAutocomplete(slot1Input, suggestions1);
        setupAutocomplete(slot2Input, suggestions2);

        // Click outside to close suggestions
        document.addEventListener('click', (e) => {
            if (!slot1Input.contains(e.target) && !suggestions1.contains(e.target)) {
                suggestions1.classList.add('hidden');
            }
            if (!slot2Input.contains(e.target) && !suggestions2.contains(e.target)) {
                suggestions2.classList.add('hidden');
            }
        });

        // --- BUTTONS ---

        swapBtn.addEventListener('click', () => {
            const temp = slot1Input.value;
            slot1Input.value = slot2Input.value;
            slot2Input.value = temp;
            calculate();
        });

        clear1Btn.addEventListener('click', () => {
            slot1Input.value = '';
            calculate();
            suggestions1.innerHTML = ''; // Clear suggestions
        });

        clear2Btn.addEventListener('click', () => {
            slot2Input.value = '';
            calculate();
            suggestions2.innerHTML = ''; // Clear suggestions
        });

        // Initial Icon Load
        lucide.createIcons();

    </script>
</body>

</html>
